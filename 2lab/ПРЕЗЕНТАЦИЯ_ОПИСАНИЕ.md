# Описание функциональности приложения "Персептрон — распознавание изображений"

## Общее описание
Веб-приложение для обучения персептрона и распознавания чёрно-белых изображений. Состоит из трёх основных вкладок: формирование обучающей выборки, обучение модели и распознавание новых изображений.

---

## ВКЛАДКА 1: "Обучающая выборка" (Dataset)

### Назначение
Формирование набора изображений для обучения персептрона. Каждое изображение должно иметь метку класса (например, "буква А", "крест", "квадрат").

### Элементы интерфейса и их функции:

#### 1. Форма загрузки изображений

**Поле "Метка класса"** (`sample-label`)
- **Что делает:** Позволяет ввести текстовое название класса для изображения
- **Пример:** "Буква А", "Крест-1", "Квадрат"
- **Требование:** Обязательное поле

**Поле "Чёрно-белое изображение"** (`sample-file`)
- **Что делает:** Позволяет выбрать файл изображения с компьютера
- **Формат:** Любой графический формат (JPG, PNG, GIF и т.д.)
- **Обработка:** Изображение автоматически конвертируется в чёрно-белое и масштабируется

**Поля "Ширина" и "Высота"** (`image-width`, `image-height`)
- **Что делает:** Задают размер изображения в пикселях для обработки
- **Диапазон:** От 3 до 12 пикселей
- **По умолчанию:** 8×8 пикселей
- **Важно:** Все изображения в выборке должны иметь одинаковый размер

**Поле "Порог бинаризации"** (`threshold`)
- **Что делает:** Определяет, при какой яркости пиксель считается белым (1) или чёрным (0)
- **Диапазон:** 0-255
- **По умолчанию:** 128
- **Принцип:** Пиксели ярче порога → белые (1), темнее → чёрные (0)

#### 2. Кнопки управления

**Кнопка "Добавить в выборку"** (Submit формы)
- **Что делает:**
  1. Читает выбранный файл изображения
  2. Масштабирует его до указанного размера (например, 8×8)
  3. Конвертирует в градации серого
  4. Применяет порог бинаризации (чёрно-белое)
  5. Преобразует в вектор из 0 и 1 (пиксели)
  6. Сохраняет в массив `state.dataset` с меткой класса
  7. Автоматически сохраняет в localStorage браузера
  8. Обновляет список образцов справа
  9. Очищает форму для следующего изображения
- **Результат:** Новый образец появляется в списке справа

**Кнопка "Загрузить демо-набор (12)"** (`add-sample-set`)
- **Что делает:**
  1. Автоматически добавляет 12 предустановленных образцов:
     - Крест-1, Крест-2
     - Квадрат, Пустой квадрат
     - Диагональ ↘, Диагональ ↗
     - Полоса вертикальная, Полоса горизонтальная
     - Буква L, Буква T, Буква U
     - Стрелка вправо
  2. Все образцы имеют размер 8×8 пикселей
  3. Сохраняет их в выборку и localStorage
  4. Обновляет интерфейс
- **Зачем:** Быстрый старт без ручной загрузки изображений

**Кнопка "Очистить"** (`clear-dataset`)
- **Что делает:**
  1. Показывает диалог подтверждения
  2. При подтверждении:
     - Удаляет все образцы из выборки
     - Очищает обученную модель (если была)
     - Сбрасывает историю обучения
     - Очищает графики и таблицы результатов
     - Удаляет данные из localStorage
  3. Обновляет интерфейс до начального состояния
- **Внимание:** Действие необратимо!

#### 3. Панель "Состояние выборки"

**Строка статистики** (`dataset-summary`)
- **Что показывает:** 
  - Общее количество изображений
  - Количество уникальных классов
  - Формат: "X изображений • Y классов"

**Список образцов** (`dataset-list`)
- **Что показывает:** Карточки каждого загруженного образца:
  - Увеличенное превью изображения (пикселизированное)
  - Номер и метка класса
  - Размер изображения (ширина×высота)
  - Количество белых пикселей
  - Кнопка "Удалить" для каждого образца
- **Кнопка "Удалить" на карточке:**
  - Удаляет только этот конкретный образец
  - Обновляет статистику
  - Сохраняет изменения в localStorage

---

## ВКЛАДКА 2: "Обучение" (Training)

### Назначение
Обучение персептрона на загруженной выборке. Настройка параметров обучения и просмотр результатов.

### Элементы интерфейса и их функции:

#### 1. Форма параметров обучения

**Поле "Скорость обучения η"** (`learning-rate`)
- **Что делает:** Определяет, насколько сильно корректируются веса на каждой итерации
- **Диапазон:** 0.01 - 1.0
- **По умолчанию:** 0.2
- **Влияние:** 
  - Больше значение → быстрее обучение, но возможна нестабильность
  - Меньше значение → медленнее, но стабильнее

**Поле "Максимум эпох"** (`max-epochs`)
- **Что делает:** Максимальное количество проходов по всей выборке
- **Диапазон:** 1 - 5000
- **По умолчанию:** 200
- **Принцип:** Обучение остановится, если достигнут этот лимит, даже если ошибка ещё не минимальна

**Поле "Порог ошибки ε (MSE)"** (`target-error`)
- **Что делает:** Целевое значение среднеквадратичной ошибки
- **Диапазон:** 0 и выше
- **По умолчанию:** 0.001
- **Принцип:** Обучение остановится, когда MSE станет меньше этого значения

**Поле "Инициализация весов (±)"** (`weight-range`)
- **Что делает:** Диапазон случайных начальных значений весов
- **Диапазон:** 0.01 - 1.0
- **По умолчанию:** 0.3
- **Принцип:** Веса инициализируются случайными числами от -0.3 до +0.3

**Поле "Активационный порог θ"** (`activation-threshold`)
- **Что делает:** Порог для функции активации нейрона
- **По умолчанию:** 0
- **Принцип:** Если net ≥ θ, то выход = 1, иначе = 0

**Кнопка "Запустить обучение"** (Submit формы)
- **Что делает:**
  1. Проверяет наличие минимум 10 изображений (требование лабораторной работы)
  2. Проверяет, что все изображения имеют одинаковый размер
  3. Создаёт нейроны для каждого уникального класса
  4. Инициализирует веса случайными значениями
  5. Запускает цикл обучения:
     - Для каждой эпохи:
       - Для каждого образца в выборке:
         - Для каждого нейрона (класса):
           - Вычисляет net = сумма(веса × входы) + bias - порог
           - Вычисляет выход (0 или 1)
           - Вычисляет ошибку = целевое значение - выход
           - Если ошибка ≠ 0, обновляет веса по дельта-правилу:
             - новый_вес = старый_вес + η × ошибка × вход
             - новый_bias = старый_bias + η × ошибка
           - Записывает информацию в лог (первые 200 итераций)
       - Вычисляет среднеквадратичную ошибку (MSE) для эпохи
       - Сохраняет MSE в историю для графика
     - Останавливается, если MSE < порога ошибки или достигнут максимум эпох
  6. Вычисляет точность на обучающей выборке
  7. Сохраняет обученную модель в `state.perceptron`
  8. Отображает результаты:
     - Метаданные обучения (входы, классы, эпохи, MSE)
     - Таблицу протокола обучения
     - Таблицу весов и порогов
     - График изменения ошибки
  9. Добавляет запись в таблицу экспериментов
  10. Показывает уведомление об успешном завершении
- **Результат:** Обученная модель готова к распознаванию

#### 2. Панель "Протокол обучения"

**Метаданные** (верхняя часть панели)
- **Входов** (`input-size`): Количество входных пикселей (ширина × высота)
- **Классов** (`class-count`): Количество уникальных классов в выборке
- **Эпох** (`epoch-count`): Количество эпох, за которое завершилось обучение
- **Итоговая MSE** (`final-mse`): Финальное значение среднеквадратичной ошибки

**Таблица протокола** (`training-log`)
- **Что показывает:** Детальная информация о первых 200 итерациях обучения:
  - **Эпоха:** Номер текущей эпохи
  - **Образ:** Метка класса обрабатываемого образца
  - **Нейрон:** Метка класса нейрона, для которого вычисляется ошибка
  - **net:** Значение взвешенной суммы до активации
  - **Ошибка:** Разница между целевым и фактическим выходом (-1, 0 или 1)
  - **Δw (первые):** Первые 5 значений изменений весов
- **Зачем:** Позволяет отследить процесс обучения пошагово

#### 3. Панель "Веса и пороги нейронов"

**Таблица весов** (`weights-table`)
- **Что показывает:**
  - **Класс:** Метка класса нейрона
  - **Bias:** Смещение (порог) нейрона
  - **Первые веса:** Первые 6 значений весов (для компактности)
- **Зачем:** Позволяет увидеть, какие веса обучил персептрон

**Кнопка "Скопировать JSON"** (`copy-weights`)
- **Что делает:**
  1. Проверяет наличие обученной модели
  2. Конвертирует всю модель (нейроны, веса, пороги) в JSON
  3. Копирует JSON в буфер обмена
  4. Показывает уведомление об успехе
- **Зачем:** Можно сохранить модель для использования в другом месте или для отчёта

**График ошибки** (`error-chart`)
- **Что показывает:** Линейный график изменения MSE по эпохам
- **Ось X:** Номер эпохи
- **Ось Y:** Значение MSE
- **Визуализация:** Синяя линия, показывающая сходимость обучения
- **Зачем:** Позволяет увидеть, как быстро модель обучается и стабилизируется ли ошибка

---

## ВКЛАДКА 3: "Распознавание" (Recognition)

### Назначение
Использование обученной модели для распознавания новых или уже известных изображений.

### Элементы интерфейса и их функции:

#### 1. Форма распознавания

**Выпадающий список "Выбор из обучающей выборки"** (`recognition-source`)
- **Что делает:** Позволяет выбрать одно из загруженных изображений для тестирования
- **Содержимое:** Список всех образцов из выборки с их метками и размерами
- **Зачем:** Проверить, правильно ли модель распознаёт уже известные образцы

**Поле "Или загрузите новое изображение"** (`recognition-file`)
- **Что делает:** Позволяет загрузить новое изображение с компьютера
- **Обработка:** 
  - Автоматически масштабируется до размера обучающей выборки
  - Конвертируется в чёрно-белое с тем же порогом бинаризации
  - Преобразуется в вектор пикселей
- **Зачем:** Распознать совершенно новое, ранее не виденное изображение

**Кнопка "Распознать образ"** (Submit формы)
- **Что делает:**
  1. Проверяет наличие обученной модели
  2. Определяет источник изображения (выборка или файл)
  3. Если из выборки:
     - Находит образец по ID
     - Использует его вектор пикселей
  4. Если новый файл:
     - Загружает и обрабатывает изображение
     - Конвертирует в вектор
  5. Для каждого нейрона (класса):
     - Вычисляет net = сумма(веса × пиксели) + bias - порог
     - Вычисляет выход f(net) = 1, если net ≥ 0, иначе 0
  6. Определяет предсказанный класс:
     - Выбирает нейрон с максимальным значением net
     - Его метка = предсказанный класс
  7. Отображает результаты:
     - Превью распознаваемого изображения
     - Предсказанный класс
     - Таблицу значений net и f(net) для всех классов
- **Результат:** Показывает, какой класс распознала модель

#### 2. Панель "Результат распознавания"

**Превью изображения** (`recognition-preview`)
- **Что показывает:** Увеличенное пикселизированное изображение, которое распознаётся
- **Размер:** Автоматически масштабируется для удобного просмотра

**Идентифицированный класс** (`recognized-label`)
- **Что показывает:** Метка класса, который предсказала модель
- **Формат:** Текстовая метка (например, "Буква А", "Крест-1")

**Таблица выходов нейронов** (`recognition-outputs`)
- **Что показывает:** Детальная информация о работе каждого нейрона:
  - **Класс:** Метка класса нейрона
  - **net:** Значение взвешенной суммы до активации
  - **f(net):** Выход после активации (0 или 1)
- **Зачем:** Позволяет увидеть, насколько уверена модель в каждом классе
- **Принцип:** Класс с максимальным net становится предсказанием

---

## ДОПОЛНИТЕЛЬНЫЕ РАЗДЕЛЫ

### Раздел "Протоколы испытаний"
- **Назначение:** Автоматическое ведение истории экспериментов
- **Таблица экспериментов:**
  - Автоматически заполняется после каждого обучения
  - Показывает: номер, дату/время, размер выборки, количество классов, эпохи, MSE, точность
  - Хранит до 12 последних экспериментов
- **Поле "Черновик наблюдений":**
  - Позволяет вручную записывать заметки о каждом эксперименте
  - Автоматически сохраняется в localStorage при вводе
  - Зачем: Фиксировать наблюдения, ограничения, идеи для улучшения

### Раздел "Содержание отчёта"
- **Назначение:** Справочная информация о требованиях к лабораторной работе
- **Содержит:** Список обязательных разделов отчёта и дополнительных материалов

---

## ТЕХНИЧЕСКИЕ ДЕТАЛИ

### Хранение данных
- Все данные сохраняются в **localStorage** браузера
- Ключи:
  - `perceptron-dataset`: Обучающая выборка
  - `perceptron-experiments`: История экспериментов
  - `perceptron-notes`: Заметки
- **Преимущество:** Данные сохраняются между сессиями, не нужно заново загружать

### Алгоритм обучения
- **Метод:** Дельта-правило (правило Уидроу-Хоффа)
- **Активация:** Пороговая функция (step function)
- **Обновление весов:** w_new = w_old + η × ошибка × вход
- **Обновление bias:** b_new = b_old + η × ошибка

### Обработка изображений
- Изображение → Canvas → Масштабирование → Градации серого → Бинаризация → Вектор [0,1]
- Размер вектора = ширина × высота пикселей

---

## ПОСЛЕДОВАТЕЛЬНОСТЬ РАБОТЫ ДЛЯ ДЕМОНСТРАЦИИ

1. **Подготовка данных:**
   - Нажать "Загрузить демо-набор" или загрузить свои изображения
   - Проверить, что есть минимум 10 образцов

2. **Обучение:**
   - Перейти на вкладку "Обучение"
   - Настроить параметры (можно оставить по умолчанию)
   - Нажать "Запустить обучение"
   - Дождаться завершения, изучить график и таблицы

3. **Распознавание:**
   - Перейти на вкладку "Распознавание"
   - Выбрать образец из выборки или загрузить новый
   - Нажать "Распознать образ"
   - Проверить результат

4. **Анализ:**
   - Посмотреть таблицу экспериментов
   - Сравнить результаты разных запусков обучения

